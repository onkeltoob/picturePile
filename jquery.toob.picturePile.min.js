(function(e){e.extend(e.fn,{picturePile:function(t){var n=e.extend({maxRotationLeft:5,maxRotationRight:15,targetAttributeName:"target",imageAttributeName:"image",titleAttributeName:"title",fixedWidth:0,fixedHeight:0,captionSize:30},t);n.targetAttributeName=!/^data\-(.)+$/.test(n.targetAttributeName)?"data-"+n.targetAttributeName:n.targetAttributeName;n.imageAttributeName=!/^data\-(.)+$/.test(n.imageAttributeName)?"data-"+n.imageAttributeName:n.imageAttributeName;n.titleAttributeName=!/^data\-(.)+$/.test(n.titleAttributeName)?"data-"+n.titleAttributeName:n.titleAttributeName;n.maxRotationLeft=Math.abs(n.maxRotationLeft);n.maxRotationRight=Math.abs(n.maxRotationRight);this.each(function(){e(this).addClass="picturePile";var t=e(this);e(this).find("li").each(function(){e(this).css("z-index",Math.floor(Math.random()*1e3));var t=e(document.createElement("figure"));t.css("transform","rotate("+(-n.maxRotationLeft+Math.floor(Math.random()*(n.maxRotationLeft+n.maxRotationRight+1)))+"deg)");var r=e(document.createElement("img"));r.attr("src",e(this).attr(n.imageAttributeName));r.attr("alt",e(this).attr(n.titleAttributeName));if(n.fixedWidth>0){r.css("width",n.fixedWidth+"px")}if(n.fixedHeight>0){r.css("height",n.fixedHeight+"px")}r.css("padding-bottom",n.captionSize+15+"px");var i=e(document.createElement("figcaption"));i.text(e(this).attr(n.titleAttributeName));i.css("font-size",n.captionSize+"px");t.append(r);t.append(i);if(e(this).attr(n.targetAttributeName)){var s=e(document.createElement("a"));s.attr("href",e(this).attr(n.targetAttributeName));s.append(t);e(this).append(s)}else{e(this).append(t)}})});return this}})})(jQuery)
